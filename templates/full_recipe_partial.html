{% extends 'base.html' %}
{% block content %}
<body>
    {% include 'full_header.html' %}
    <div class="full-recipe-container">
        <section class='full-recipe'>
            <div class='full-recipe__row--grey-background'>
                <h2 class='full-recipe__title'>{{ full_recipe[1][0]['RecipeTitle']}}</h2>
            </div>
            <div class='full-recipe__author'>
                <p class='full-recipe__text'>created by <strong>{{ full_recipe[1][0] ['Author'] }}</strong> at {{ full_recipe[1][0]['Created'] }}</p>
            </div>
            <div class='full-recipe__row full-recipe__row--grey-background'>
                <div class='full-recipe__column'>
                    <h3 class='full-recipe__subtitle'>Cuisine</h3>
                    <p class='full-recipe__text' >{{ full_recipe[1][0]['CuisineName'] }}.</p>
                </div>
                <div class='full-recipe__column'>
                    <h3 class='full-recipe__subtitle'>Course</h3> 
                    <p class='full-recipe__text'>{{ full_recipe[1][0] ['CourseName'] }}.</p>
                </div>
            </div>
            <div class='full-recipe__row'>
                <div class='full-recipe__column'>
                    <h3 class='full-recipe__subtitle'>Time</h3>
                    <p class='full-recipe__text'>{{ full_recipe[1][0]['CookingTimeMins']}} minutes.</p>
                </div>
                <div class='full-recipe__column'>
                    <h3 class='full-recipe__subtitle'>Cost</h3>
                    <p class='full-recipe__text'>Â£{{ full_recipe[1][0]['Price'] }}.</p>
                </div>
            </div>
            <div class='full-recipe__row full-recipe__row--grey-background  full-recipe__row--margin--bottom'>
                <div class='full-recipe__column'>
                    <h3 class='full-recipe__subtitle'>Servings</h3>
                    <p class='full-recipe__text'>{{ full_recipe[1][0]['Servings'] }}.</p>
                </div>
                <div class='full-recipe__column'>
                    <h3 class='full-recipe__subtitle'>Calories</h3>
                    <p class='full-recipe__text'>{{full_recipe[1][0]['Calories']}}.</p>
                </div>
            </div>
            <hr class='hr-90'>
            <div class='full-recipe__description'>
                <h3 class='full-recipe__subtitle full-recipe__row--grey-background'>Description</h3>
                <p class='full-recipe__text'>{{ full_recipe[1][0]['RecipeDescription']}}</p>
            </div>
            <div class='full-recipe__ingredients'>
                <h3 class='full-recipe__subtitle full-recipe__row--grey-background'>Ingredients</h3>
                <ol>
                    {% if full_recipe[2] == [] %}
                    <li>No ingredients for this recipe yet</li>
                    {% else %}
                    {% for ingredient in full_recipe[2] %}
                    <li>{{ ingredient['Quantity']}} {{ ingredient['IngredientName']}}</li>
                    {% endfor %}
                    {% endif %}
                </ol>
            </div>
            <div class='full-recipe__method'>
                <h3 class='full-recipe__subtitle full-recipe__row--grey-background'>Method</h3>
                <ol>
                    {% if full_recipe[3] == [] %}
                    <li>No method for this recipe yet</li>
                    {% else %}
                    {% for step in full_recipe[3] %}
                    <li>{{ step['StepDescription']}}</li>
                    {% endfor %}
                    {% endif %}
                </ol>
            </div>
        </section>
        {% if username == full_recipe[1][0] ['Author'] %}
        <section>
            <form action="{{ url_for('edit_recipe', username=username, recipe_id=recipe_id)}}" method='POST'>
                <button type='submit' name='RecipeId' value='{{ recipe_id }}'>Edit Recipe</button>
            </form>
            <br>
            <form action="{{ url_for('delete_recipe', username=username) }}" method='POST'>
                <button type='submit' name='RecipeId' value='{{ recipe_id }}'>Delete Recipe</button>
            </form>
        </section>
        {% else %}
        {% if full_recipe[4] == False %}
        <section class='save-recipe'>
            <form action="{{ url_for('save_recipe', username=username, recipe_id=recipe_id) }}" method='POST'>
                <label class='form-label'>Save this Recipe?</label>
                <hr class='hr-90'>
                <div>
                    <input type='radio' name='Saved' value='1'><label class='form-label input-label'>Save</label>
                </div>
                <input class='form-submit' type='submit' value='Submit'>
            </form>
        </section>
        {% elif full_recipe[4] == True %}
        <section class='save-recipe'>
            <form action="{{ url_for('save_recipe', username=username, recipe_id=recipe_id) }}" method='POST'>
                <label class='form-label'><strong>Un-save this Recipe?</strong></label>
                <hr class='hr-90'>
                <div>
                    <input type='radio' name='Saved' value='0'><label class='form-label input-label'>Un-save</label>
                </div>
                <input class='form-submit' type='submit' value='Submit'>
            </form>
        </section>
        {% endif %}
        <section class='recipe-comment'>
            <form action=" {{ url_for('rate_recipe', username=username, recipe_id=recipe_id ) }}" method='POST'>
                <label class='form-label'><strong>Leave a comment.</strong></label>
                <hr class='hr-90'>
                <textarea class='form-label form-text-area' type='text' placeholder='Comments' name='Comments' maxlength='250' required></textarea>
                <label class='form-label'><strong>Rate this Recipe.</strong></label>
                <hr class="hr-90">
                <div>
                    <input type='radio' value='1' name='Rating'><label class='form-label'>1</label>
                    <input type='radio' value='2' name='Rating'><label class='form-label'>2</label>
                    <input type='radio' value='3' name='Rating'><label class='form-label'>3</label>
                    <input type='radio' value='4' name='Rating'><label class='form-label'>4</label>
                    <input type='radio' value='5' name='Rating' checked><label class='form-label'>5</label>   
                </div>
                <input class='form-submit' type='submit' value='Submit'>
            </form>
        </section>
        {% if full_recipe[5] != [] %}
        <section>
            <div>
                <h3>User Comments</h3>
                {% for rating in full_recipe[5] %}
                <p class='full-recipe__text'><strong>Rating: </strong>{{ rating['Rating'] }}</p>
                
                <p class='full-recipe__text'><em>"{{ rating['Comments'] }}"</em></p>
                <p class='full-recipe__text'>Rated by <strong>{{ rating['Username'] }}</strong>.</p>
                <br>
                {% endfor %}
            </div>
        </section>
        {% endif %}
        {% endif %}
    </div>
    <script type='text/javascript' src="{{ url_for('static', filename='js/scripts/classes.js') }}"></script>
    <script type='text/javascript' src="{{ url_for('static', filename='js/scripts/fullrecipe.js') }}"></script>
</body>
{% endblock%}